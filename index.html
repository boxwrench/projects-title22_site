<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Title 22 | Water Treatment</title>
    <meta
      name="description"
      content="Professional water treatment resources, research, and writing."
    />
    <link
      rel="icon"
      type="image/png"
      href="assets/brand/favicon/22favicon.png"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/static.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container header-inner">
        <a href="/" class="logo">
          <img
            src="assets/brand/favicon/22favicon.png"
            alt="Title 22"
            class="logo-img"
          />
          <span class="logo-text">Title 22</span>
        </a>
        <nav class="nav">
          <a href="#projects" class="nav-link">Projects</a>
          <a href="#tools" class="nav-link">Tools</a>
          <a href="#research" class="nav-link">Research</a>
          <a href="#writing" class="nav-link">Writing</a>
          <a href="#resume" class="nav-link">Resume</a>
          <a href="#overflow" class="nav-link">Overflow</a>
        </nav>
      </div>
    </header>

    <!-- Main Content -->

    <main class="main-content">
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-bg"></div>
        <div class="container hero-content">
          <h1 class="hero-title">Title 22</h1>
          <p class="hero-subtitle">Water, Systems, and Strategy</p>
        </div>
      </section>

      <!-- Projects Section -->
      <section id="projects" class="category-section">
        <div class="container">
          <div class="category-header">
            <a href="projects.html">
              <div class="category-image">
                <picture>
                  <source srcset="assets/cards/optimized/projects_header.webp" type="image/webp" />
                  <img
                    src="assets/cards/optimized/projects_header.png"
                    alt="Projects Landscape"
                    loading="lazy"
                  />
                </picture>
                <div class="category-overlay">
                  <h2 class="category-title">Projects</h2>
                  <p class="category-subtitle">
                    Portfolio builds, simulators, and writeups.
                  </p>
                </div>
              </div>
            </a>
          </div>
          <div class="content-list" id="projects-list">
            <!-- Content loaded dynamically from content/projects.json -->
          </div>
        </div>
      </section>

      <!-- Tools Section -->
      <section id="tools" class="category-section">
        <div class="container">
          <div class="category-header">
            <a href="tools.html">
              <div class="category-image">
                <picture>
                  <source srcset="assets/cards/optimized/tools_header.webp" type="image/webp" />
                  <img
                    src="assets/cards/optimized/tools_header.png"
                    alt="Tools Landscape"
                    loading="lazy"
                  />
                </picture>
                <div class="category-overlay">
                  <h2 class="category-title">Tools</h2>
                  <p class="category-subtitle">
                    Calculators, checklists, and templates.
                  </p>
                </div>
              </div>
            </a>
          </div>
          <div class="content-list" id="tools-list">
            <!-- Content loaded dynamically from content/tools.json -->
          </div>
        </div>
      </section>

      <!-- Research Section -->
      <section id="research" class="category-section">
        <div class="container">
          <div class="category-header">
            <a href="research.html">
              <div class="category-image">
                <picture>
                  <source srcset="assets/cards/optimized/research_header.webp" type="image/webp" />
                  <img
                    src="assets/cards/optimized/research_header.png"
                    alt="Research Landscape"
                    loading="lazy"
                  />
                </picture>
                <div class="category-overlay">
                  <h2 class="category-title">Research</h2>
                  <p class="category-subtitle">
                    Notes on regulations, white papers, and technical deep dives.
                  </p>
                </div>
              </div>
            </a>
          </div>
          <div class="content-list" id="research-list">
            <!-- Content loaded dynamically from content/research.json -->
          </div>
        </div>
      </section>

      <!-- Writing Section -->
      <section id="writing" class="category-section">
        <div class="container">
          <div class="category-header">
            <a href="writing.html">
              <div class="category-image">
                <picture>
                  <source srcset="assets/cards/optimized/writing_header.webp" type="image/webp" />
                  <img
                    src="assets/cards/optimized/writing_header.png"
                    alt="Writing Landscape"
                    loading="lazy"
                  />
                </picture>
                <div class="category-overlay">
                  <h2 class="category-title">Writing</h2>
                  <p class="category-subtitle">
                    Literary and creative perspectives on water.
                  </p>
                </div>
              </div>
            </a>
          </div>
          <div class="content-list" id="writing-list">
            <!-- Content loaded dynamically from content/writing.json -->
          </div>
        </div>
      </section>

      <!-- Resume Section -->
      <section id="resume" class="category-section section-resume">
        <div class="container">
          <div class="category-header">
            <div class="category-image">
              <picture>
                <source srcset="assets/cards/optimized/resume_header.webp" type="image/webp" />
                <img
                  src="assets/cards/optimized/resume_header.png"
                  alt="Resume Landscape"
                  loading="lazy"
                />
              </picture>
              <div class="category-overlay">
                <h2 class="category-title"><a href="resume.html">Resume</a></h2>
                <p class="category-subtitle">
                  Professional experience and qualifications.
                </p>
              </div>
            </div>
          </div>
          <div class="resume-grid" style="margin-top: 2rem" id="home-resume-grid">
            <div class="resume-main" id="home-resume-main">
              <p style="color: var(--ink-lighter); font-size: 0.9rem;">Loading...</p>
            </div>
            <div class="resume-sidebar" id="home-resume-sidebar"></div>
          </div>
        </div>
      </section>

      <!-- Overflow Section -->
      <section id="overflow" class="category-section">
        <div class="container">
          <div class="category-header">
            <a href="overflow.html">
              <div class="category-image">
                <picture>
                  <source srcset="assets/cards/optimized/overflow_header.webp" type="image/webp" />
                  <img src="assets/cards/optimized/overflow_header.png" alt="Overflow" loading="lazy" />
                </picture>
                <div class="category-overlay">
                  <h2 class="category-title">Overflow</h2>
                  <p class="category-subtitle">Interesting finds, curiosities, and diversions.</p>
                </div>
              </div>
            </a>
          </div>
          <div class="grid-2-col" style="margin-top: 24px;">
            <div class="col">
              <h3 class="small-title">Interesting Finds</h3>
              <ul class="simple-list" id="finds-list">
                <!-- Content loaded dynamically -->
              </ul>
            </div>
            <div class="col">
              <h3 class="small-title">Fun</h3>
              <ul class="simple-list" id="fun-list">
                <!-- Content loaded dynamically -->
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Newsletter -->
      <section class="newsletter-section">
        <div class="container newsletter-box">
          <h2 class="newsletter-title">Join the Flow</h2>
          <p class="newsletter-desc">
            Weekly notes on water treatment operations, chemistry, and systems
            thinking.
          </p>
          <form class="newsletter-form" action="#" method="POST">
            <input
              type="email"
              class="newsletter-input"
              placeholder="Enter your email"
              required
            />
            <button type="submit" class="newsletter-btn">Subscribe</button>
          </form>
          <p class="newsletter-note">Read by 500+ operators and engineers.</p>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-bg"></div>
      <div class="container footer-inner">
        <div class="footer-brand">
          <img
            src="assets/brand/favicon/22favicon.png"
            alt="Title 22"
            class="footer-logo"
          />
          <span>Title 22</span>
        </div>
        <p class="footer-copy">
          &copy; 2025 Title 22. Built for water treatment professionals.
        </p>
      </div>
    </footer>
    <script src="js/parallax.js"></script>
    <script src="js/content-loader.js"></script>
    <script>
      // Load content from JSON files
      document.addEventListener("DOMContentLoaded", () => {
        // Featured items on homepage (only items with featured: true, max 3 per section)
        ContentLoader.loadSection("content/projects.json", "projects-list", {
          featuredOnly: true,
          limit: 3,
        });
        ContentLoader.loadSection("content/tools.json", "tools-list", {
          featuredOnly: true,
          limit: 3,
        });
        ContentLoader.loadSection("content/research.json", "research-list", {
          featuredOnly: true,
          limit: 3,
        });
        ContentLoader.loadSection("content/writing.json", "writing-list", {
          featuredOnly: true,
          limit: 3,
        });

        // Simple lists for Finds & Fun
        ContentLoader.loadSection("content/finds.json", "finds-list", {
          simpleList: true,
        });
        ContentLoader.loadSection("content/fun.json", "fun-list", {
          simpleList: true,
        });

        // Resume snapshot from resume.json
        ContentLoader.load("content/resume.json").then(data => {
          if (!data) return;
          const esc = s => ContentLoader.escapeHTML(s);

          // Top 2 roles
          let mainHTML = '';
          if (data.experience) {
            data.experience.slice(0, 2).forEach(job => {
              mainHTML += `
                <div class="resume-block">
                  <h3 class="resume-role">${esc(job.role)}</h3>
                  <p class="resume-company">${esc(job.org)} &bull; ${esc(job.period)}</p>
                  <p class="resume-desc">${esc((job.highlights && job.highlights[0]) || '')}</p>
                </div>
              `;
            });
          }
          document.getElementById('home-resume-main').innerHTML = mainHTML;

          // Sidebar: currently + top certs
          let sideHTML = '';
          if (data.currently) {
            sideHTML += `
              <div class="now-block">
                <h3 class="now-title">Currently</h3>
                <ul class="now-list">
                  <li>${esc(data.currently.role)}</li>
                  <li>${esc(data.currently.focus)}</li>
                </ul>
              </div>
            `;
          }
          if (data.certifications) {
            sideHTML += `
              <div class="skills-block">
                <h3 class="now-title">Certifications</h3>
                <ul class="skills-list">
                  ${data.certifications.slice(0, 3).map(c => `<li>${esc(c)}</li>`).join('')}
                </ul>
              </div>
            `;
          }
          document.getElementById('home-resume-sidebar').innerHTML = sideHTML;
        });
      });
    </script>
  </body>
</html>
